(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{42:function(e,a,t){e.exports=t(71)},69:function(e,a,t){},71:function(e,a,t){"use strict";t.r(a);var n,r,l,s,i=t(0),c=t.n(i),o=t(23),u=t.n(o),d=t(7),m=t(21),p=t(41),v=t(8),E=t(22),f="LOGIN_REQUEST",h="LOGIN_REQUEST_FAIL",g="LOGOUT",w="PASSWORD_RESET_REQUEST",b="PASSWORD_RESET",_="PASSWORD_RESET_FAIL",O="PASSWORD_RESET_CHECK",R="REGISTER_ACCOUNT_REQUEST",j="REGISTER_ACCOUNT_REQUEST_FAIL",y=t(10),S=t.n(y),A={test:"",loginData:(n={},Object(E.a)(n),n),loginRequestFail:"",auth_access:S.a.get("auth_access"),auth_refresh:S.a.get("auth_refresh"),passwordResetRequestMessage:"",passwordResetMessage:"",passwordResetMessageErrors:(r={},Object(E.a)(r),r),passwordResetCheckMessage:(l={},Object(E.a)(l),l),registerSuccess:"",registerDataError:(s={},Object(E.a)(s),s),registerRequestFail:!1},C=Object(m.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case f:return Object(v.a)(Object(v.a)({},e),{},{auth_access:a.payload.data.access,auth_refresh:a.payload.data.refresh});case h:return Object(v.a)(Object(v.a)({},e),{},{loginRequestFail:a.payload.detail});case g:return Object(v.a)(Object(v.a)({},e),{},{auth_access:"",auth_refresh:""});case w:return Object(v.a)(Object(v.a)({},e),{},{passwordResetRequestMessage:a.payload.detail});case b:return Object(v.a)(Object(v.a)({},e),{},{passwordResetMessage:a.payload.detail});case _:return Object(v.a)(Object(v.a)({},e),{},{passwordResetMessageErrors:a.payload.errors});case O:return Object(v.a)(Object(v.a)({},e),{},{passwordResetCheckMessage:{status:a.payload.status,message:a.payload.passwordResetCheck}});case R:return Object(v.a)(Object(v.a)({},e),{},{auth_access:a.payload.data.access,auth_refresh:a.payload.data.refresh,registerSuccess:a.payload.data.success});case j:return Object(v.a)(Object(v.a)({},e),{},{registerDataError:a.payload.data,registerRequestFail:!0});default:return e}}),Object(m.a)(p.a)),k=t(12),L=t(5),P=t(25),q=function(e){var a=e.component,t=Object(P.a)(e,["component"]);return(c.a.createElement(L.b,Object.assign({},t,{render:function(e){return S.a.get("auth_access")?c.a.createElement(a,e):c.a.createElement(L.a,{to:"/login"})}})))},D=function(e){var a=e.component,t=e.noAuth,n=Object(P.a)(e,["component","noAuth"]);return console.log("isLogin"),c.a.createElement(L.b,Object.assign({},n,{render:function(e){return t&&S.a.get("auth_access")?c.a.createElement(L.a,{to:"/private"}):c.a.createElement(a,e)}}))},I=t(16),M=t(72),T=t(73),F=t(74),N=t(75),U=t(76),x=t(77),W={username:{value:"",valid:!1,invalid:!1,validationRules:{minLength:4,isRequired:!0}},password:{value:"",valid:!1,invalid:!1,validationRules:{minLength:1,isRequired:!0}}},G={email:{value:"",valid:!1,invalid:!1,validationRules:{isRequired:!0,isEmail:!0}}},Q={new_password1:{value:"",valid:!1,invalid:!1,validationRules:{isRequired:!0,minLength:6}},new_password2:{value:"",valid:!1,invalid:!1,validationRules:{isRequired:!0,minLength:6}}},B={email:{value:"",valid:!1,invalid:!1,validationRules:{minLength:7,isRequired:!0,isEmail:!0}},first_name:{value:"",valid:!1,invalid:!1,validationRules:{minLength:3,isRequired:!0}},last_name:{value:"",valid:!1,invalid:!1,validationRules:{minLength:3,isRequired:!0}},password:{value:"",valid:!1,invalid:!1,validationRules:{minLength:6,isRequired:!0}},confirm:{value:"",valid:!1,invalid:!1,validationRules:{minLength:6,isRequired:!0}}},z=function(e,a){var t=!0;for(var n in a)switch(n){case"minLength":t=t&&J(e,a[n]);break;case"maxLength":t=t&&Z(e,a[n]);break;case"isRequired":t=t&&$(e);break;case"isEmail":t=t&&H(e);break;default:t=!0}return t},J=function(e,a){return e.length>=a},Z=function(e,a){return e.length<=a},$=function(e){return""!==e.trim()},H=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},K=function(e){var a=!0;return Object.keys(e).forEach((function(t){a=a&&e[t].valid})),a},V=function(e,a,t){var n=e;return n[a].value=t,n[a].valid=z(t,n[a].validationRules),n[a].invalid=!n[a].valid,n},X=t(15),Y=t.n(X),ee=!1,ae=function(e){return ee?function(e){return e({type:""})}:(ee=!0,function(a){return Y.a.post("".concat(window.API_DOMAIN,"/api/auth/token/"),e).then((function(e){return S.a.set("auth_access",e.data.access,{path:"/"}),S.a.set("auth_refresh",e.data.refresh,{path:"/"}),ee=!1,a({type:f,payload:{data:e.data}})}),(function(e){return ee=!1,a({type:h,payload:{detail:e.response.data.detail}})}))})},te=function(e){var a=Object(i.useState)(W),t=Object(I.a)(a,2),n=t[0],r=t[1],l=Object(d.b)(),s=Object(d.c)((function(e){return e})),o=s.auth_access,u=s.loginRequestFail,m=function(e,a){r(V(n,a,e))};return c.a.createElement(M.a,null,o&&c.a.createElement(L.a,{to:"/private"}),u&&c.a.createElement(T.a,null,c.a.createElement("p",null,u)),c.a.createElement(T.a,{style:{marginTop:20}},c.a.createElement(F.a,{onSubmit:function(e){if(e.preventDefault(),K(n)){var a={username:n.username.value,password:n.password.value};l(ae(a))}}},c.a.createElement(N.a,null,c.a.createElement(U.a,{type:"text",name:"username",placeholder:"Username",id:"username",onChange:function(e){return m(e.target.value,"username")},valid:n.username.valid,invalid:n.username.invalid})),c.a.createElement(N.a,null,c.a.createElement(U.a,{type:"password",name:"password",placeholder:"Password",id:"password",onChange:function(e){return m(e.target.value,"password")},valid:n.password.valid,invalid:n.password.invalid})),c.a.createElement(N.a,null,c.a.createElement(U.a,{type:"submit",name:"login_button",id:"login_button",value:"Login"})))),c.a.createElement(T.a,null,c.a.createElement(x.a,null,c.a.createElement(k.b,{to:"/forgot"},"Forgot your password?"))),c.a.createElement(T.a,null,c.a.createElement(x.a,null,c.a.createElement(k.b,{to:"/register"},"Register a new user"))))},ne=t(78),re=!1,le=function(e){return re?function(e){return e({type:""})}:(re=!0,function(a){return Y.a.post("".concat(window.API_DOMAIN,"/api/auth/register/"),e).then((function(e){return e.data.success&&(S.a.set("auth_access",e.data.access,{path:"/"}),S.a.set("auth_refresh",e.data.refresh,{path:"/"})),re=!1,a({type:R,payload:{data:e.data}})}),(function(e){return re=!1,a({type:j,payload:{data:e.response.data}})}))})},se=function(e){var a=Object(i.useState)(B),t=Object(I.a)(a,2),n=t[0],r=t[1],l=Object(i.useState)(!1),s=Object(I.a)(l,2),o=s[0],u=s[1],m=Object(d.c)((function(e){return e})).registerSuccess,p=Object(d.b)(),v=Object(d.c)((function(e){return e})),E=v.auth_access,f=v.registerRequestFail,h=v.registerDataError,g=function(e,a){r(V(n,a,e))};return c.a.createElement(M.a,null,E&&c.a.createElement(L.a,{to:"/private"}),c.a.createElement(T.a,null,c.a.createElement("h1",null,"Register")),m&&c.a.createElement(T.a,null,"User was registered Sucessfully"),f&&c.a.createElement(T.a,null,Object.keys(h).map((function(e){return h[e].length?h[e].map((function(a){return c.a.createElement("p",{key:"error_register_".concat(e)},a)})):c.a.createElement("p",{key:"error_register_".concat(e)},h[e][e])}))),!m&&c.a.createElement(T.a,null,c.a.createElement(F.a,{onSubmit:function(e){if(u(!0),e.preventDefault(),K(n)){var a={email:n.email.value,first_name:n.first_name.value,last_name:n.last_name.value,password:n.password.value,confirm:n.confirm.value};p(le(a))}}},c.a.createElement(N.a,null,c.a.createElement(U.a,{type:"text",name:"email",placeholder:"e-mail",id:"email",onChange:function(e){return g(e.target.value,"email")},valid:n.email.valid,invalid:n.email.invalid})),c.a.createElement(N.a,null,c.a.createElement(U.a,{type:"text",name:"first_name",placeholder:"First Name",id:"first_name",onChange:function(e){return g(e.target.value,"first_name")},valid:n.first_name.valid,invalid:n.first_name.invalid})),c.a.createElement(N.a,null,c.a.createElement(U.a,{type:"text",name:"last_name",placeholder:"Last Name",id:"last_name",onChange:function(e){return g(e.target.value,"last_name")},valid:n.last_name.valid,invalid:n.last_name.invalid})),c.a.createElement(N.a,null,c.a.createElement(U.a,{type:"password",name:"password",placeholder:"Password",id:"password",onChange:function(e){return g(e.target.value,"password")},valid:n.password.valid,invalid:n.password.invalid})),c.a.createElement(N.a,null,c.a.createElement(U.a,{type:"password",name:"confirm",placeholder:"Confirm Password",id:"confirm",onChange:function(e){return g(e.target.value,"confirm")},valid:n.confirm.valid,invalid:n.confirm.invalid})),c.a.createElement(N.a,null,c.a.createElement(U.a,{type:"submit",name:"register_button",id:"register_button",value:"Submit"}),o&&c.a.createElement(ne.a,{color:"muted"},"...loading")))))},ie=t(18),ce=!1,oe=function(e,a,t){return ce?function(e){return e({type:""})}:(ce=!0,function(n){return Y.a.post("".concat(window.API_DOMAIN,"/api/auth/reset/").concat(a,"/").concat(t,"/"),e).then((function(e){return ce=!1,n({type:b,payload:{detail:e.data.detail}})}),(function(e){return ce=!1,n({type:_,payload:{errors:e.response.data.errors}})}))})},ue=function(e,a){return function(t){return Y.a.get("".concat(window.API_DOMAIN,"/api/auth/reset/").concat(e,"/").concat(a,"/")).then((function(e){return t({type:O,payload:{passwordResetCheck:e.data.detail,status:"ok"}})}),(function(e){return t({type:O,payload:{passwordResetCheck:e.response.data.detail,status:"fail"}})}))}},de=function(){var e=Object(L.h)(),a=e.uid,t=e.token,n=Object(i.useState)(Q),r=Object(I.a)(n,2),l=r[0],s=r[1],o=Object(d.c)((function(e){return e.passwordResetMessage})),u=Object(d.c)((function(e){return e.passwordResetMessageErrors})),m=Object(d.c)((function(e){return e.passwordResetCheckMessage})),p=Object(d.b)();Object(i.useEffect)((function(){p(ue(a,t))}),[]);var v=function(e,a){s(V(l,a,e))};return c.a.createElement(M.a,null,c.a.createElement(T.a,null,c.a.createElement("h1",null,"Reset Password")),"fail"===m.status&&c.a.createElement(T.a,null,c.a.createElement("p",null,m.message)),o&&c.a.createElement(T.a,null,c.a.createElement("p",null,o)),"ok"===m.status&&!o&&c.a.createElement(c.a.Fragment,null,c.a.createElement(T.a,null,c.a.createElement("p",null,m.message)),u.new_password2&&c.a.createElement(T.a,null,c.a.createElement("ul",null,u.new_password2.map((function(e,a){return c.a.createElement("li",{key:"error_reset_".concat(a)},e)})))),c.a.createElement(T.a,null,c.a.createElement(F.a,{onSubmit:function(e){e.preventDefault();var n=K(l)&&l.new_password1.value==l.new_password2.value;if(console.log(n),n){var r={new_password1:l.new_password1.value,new_password2:l.new_password2.value};p(oe(r,a,t))}}},c.a.createElement(N.a,null,c.a.createElement(U.a,Object(ie.a)({type:"password",name:"new_password1",placeholder:"Password",id:"new_password1",onChange:function(e){return v(e.target.value,"new_password1")},valid:l.new_password1.valid},"valid",l.new_password1.invalid)),c.a.createElement(U.a,Object(ie.a)({type:"password",name:"new_password2",placeholder:"Password Confirm",id:"new_password2",onChange:function(e){return v(e.target.value,"new_password2")},valid:l.new_password2.valid},"valid",l.new_password2.invalid))),c.a.createElement(N.a,null,c.a.createElement(U.a,{type:"submit",name:"reset_button",id:"reset_button",value:"Reset Password"}))))))},me=!1,pe=function(e){return me?function(e){return e({type:""})}:(me=!0,function(a){return Y.a.post("".concat(window.API_DOMAIN,"/api/auth/password_reset"),e).then((function(e){return me=!1,a({type:w,payload:{detail:e.data.detail}})}))})},ve=function(e){var a=Object(i.useState)(G),t=Object(I.a)(a,2),n=t[0],r=t[1],l=Object(i.useState)(!1),s=Object(I.a)(l,2),o=s[0],u=s[1],m=Object(d.b)(),p=Object(d.c)((function(e){return e.passwordResetRequestMessage}));return c.a.createElement(M.a,null,c.a.createElement(T.a,null,c.a.createElement("h1",null,"Reset Password")),c.a.createElement(T.a,null,p&&c.a.createElement("p",null,p),!p&&c.a.createElement(F.a,{onSubmit:function(e){if(u(!0),e.preventDefault(),K(n)){var a={email:n.email.value};m(pe(a))}}},c.a.createElement(N.a,null,c.a.createElement(U.a,Object(ie.a)({type:"text",name:"email",placeholder:"e-mail",id:"email",onChange:function(e){return a=e.target.value,void r(V(n,"email",a));var a},valid:n.email.valid},"valid",n.email.invalid))),c.a.createElement(N.a,null,c.a.createElement(U.a,{type:"submit",name:"reset_button",id:"reset_button",value:"Submit"}),o&&c.a.createElement(ne.a,{color:"muted"},"...loading")))))},Ee=t(79),fe=function(){return function(e){return S.a.remove("auth_access",{path:"/"}),S.a.remove("auth_refresh",{path:"/"}),e({type:g})}},he=function(){var e=Object(L.g)(),a=Object(d.b)();return c.a.createElement(M.a,null,c.a.createElement("h1",null,"Private Page"),c.a.createElement("p",null,"private page content"),c.a.createElement(Ee.a,{onClick:function(){a(fe()),e.push("/login")}},"Logout"))},ge=function(e){return c.a.createElement("div",null,c.a.createElement("h1",null,"Public"),c.a.createElement("p",null,"PUblic content"))},we=function(e){return c.a.createElement(M.a,null,c.a.createElement("h1",null,"Django React Base Page"),c.a.createElement(k.b,{to:"/login"},"Login"))};t(69);var be=function(){return c.a.createElement(k.a,null,c.a.createElement(L.d,null,c.a.createElement(D,{exact:!0,path:"/",component:we}),c.a.createElement(D,{path:"/login",component:te,noAuth:!0}),c.a.createElement(D,{path:"/forgot",component:ve,noAuth:!0}),c.a.createElement(D,{path:"/register",component:se,noAuth:!0}),c.a.createElement(D,{path:"/auth/reset/:uid/:token/",component:de,noAuth:!0}),c.a.createElement(D,{path:"/public",component:ge}),c.a.createElement(q,{path:"/private",component:he})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(70);u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(d.a,{store:C},c.a.createElement(be,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.c8505e90.chunk.js.map